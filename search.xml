<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo+Github优化</title>
    <url>/2020/05/27/Hexo-Github%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h1 id="Hexo-Github优化"><a href="#Hexo-Github优化" class="headerlink" title="Hexo+Github优化"></a>Hexo+Github优化</h1><h2 id="致敬"><a href="#致敬" class="headerlink" title="致敬"></a>致敬</h2><p>基本完全参考这位大佬！</p>
<h3 id="从零开始搭建"><a href="#从零开始搭建" class="headerlink" title="从零开始搭建"></a>从零开始搭建</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;wangwlj.com&#x2F;2017&#x2F;09&#x2F;08&#x2F;blog_setup&#x2F;</span><br></pre></td></tr></table></figure>

<h3 id="优化hexo-github"><a href="#优化hexo-github" class="headerlink" title="优化hexo+github"></a>优化hexo+github</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;wangwlj.com&#x2F;2017&#x2F;09&#x2F;09&#x2F;blog-opti&#x2F;</span><br></pre></td></tr></table></figure>



<h3 id="重新做用不同的方法？"><a href="#重新做用不同的方法？" class="headerlink" title="重新做用不同的方法？"></a>重新做用不同的方法？</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;juejin.im&#x2F;post&#x2F;5bebfe51e51d45332a456de0#heading-5</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="写在之前"><a href="#写在之前" class="headerlink" title="写在之前"></a>写在之前</h2><h3 id="想要达成的东西"><a href="#想要达成的东西" class="headerlink" title="想要达成的东西"></a>想要达成的东西</h3><ul>
<li>每个标签都有指定的跳转-自定义标题</li>
</ul>
<p><img src="https://gitee.com//Lucifiash/blogimg/raw/master/img/image-20200527122212490.png" alt="image-20200527122212490"></p>
<ul>
<li><p>可以跳转到github-甚至bilibili</p>
<p><img src="https://gitee.com//Lucifiash/blogimg/raw/master/img/image-20200527152320354.png" alt="image-20200527152320354"></p>
</li>
</ul>
<hr>
<h2 id="掘金大佬"><a href="#掘金大佬" class="headerlink" title="掘金大佬"></a>掘金大佬</h2><h3 id="三种方案部署和绑定域名"><a href="#三种方案部署和绑定域名" class="headerlink" title="三种方案部署和绑定域名"></a>三种方案部署和绑定域名</h3><p>事无巨细牛逼</p>
<p><img src="https://gitee.com//Lucifiash/blogimg/raw/master/img/image-20200527152240025.png" alt="image-20200527152240025"></p>
<hr>
<h2 id="博客大佬"><a href="#博客大佬" class="headerlink" title="博客大佬"></a>博客大佬</h2><h3 id="更换Hexo主题"><a href="#更换Hexo主题" class="headerlink" title="更换Hexo主题"></a>更换Hexo主题</h3><p>笔者更换后的主题为NexT，其Github网址为：<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next</a> 。首先将NexT的主题源文件下载到本地，使用Git克隆指令如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;iissnan&#x2F;hexo-theme-next themes&#x2F;next</span><br></pre></td></tr></table></figure>

<p>下载后，将压缩包解压缩(文件位于指令运行的当前目录)，复制其中名称为<code>next</code>的文件夹到<code>Hexo</code>的主题目录下，主题目录的路径为：</p>
<blockquote>
<p>Hexo博客根目录/themes/</p>
</blockquote>
<p>在Hexo根目录下有一个以<code>_config.yml</code>命名的文件（下称<strong>站点配置文件</strong> ），用<code>Sublime/NotePad++</code>等文本编辑器打开，在其中找到<code>theme</code>属性，将其由<code>landscape</code>改为<code>next</code>。</p>
<hr>
<h3 id="修正图片显示问题"><a href="#修正图片显示问题" class="headerlink" title="修正图片显示问题"></a>修正图片显示问题</h3><p>经过上面的配置后，发现上传的博客文章里面的本地图片居然显示不来（没有同步上传）。</p>
<p>于是，找到解决方案：</p>
<p>1 把主页配置文件<code>_config.yml</code> 里的<code>post_asset_folder:</code>这个选项设置为<code>true</code></p>
<p>2 在你的hexo目录下执行这样一句话<code>npm install hexo-asset-image --save</code>，这是下载安装一个可以上传本地图片的插件</p>
<p>3 等待一小段时间后，再运行<code>hexo n &quot;xxxx&quot;</code>来生成<code>md</code>博文时，<code>/source/_posts</code>文件夹内除了<code>xxxx.md</code>文件还有一个同名的文件夹</p>
<p>4 最后在xxxx.md中想引入图片时，先把图片复制到xxxx这个文件夹中，然后只需要在xxxx.md中按照markdown的格式引入图片：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">![你想输入的替代文字](xxxx&#x2F;图片名.jpg)</span><br></pre></td></tr></table></figure>



<p>注意： <code>xxxx</code>是这个md文件的名字，也是同名文件夹的名字。只需要有文件夹名字即可，不需要有什么绝对路径。你想引入的图片就只需要放入<code>xxxx</code>这个文件夹内就好了，很像引用相对路径。</p>
<p>5.<code>hexo s</code>，运行本地服务器，打开<code>http://localhost:4000/</code>，可实时查看修改情况。</p>
<p>6.<code>hexo d</code>，同步到github。</p>
<p>参考自：<a href="http://blog.csdn.net/sugar_rainbow/article/details/57415705" target="_blank" rel="noopener">hexo生成博文插入图片</a></p>
<h3 id="设置预览摘要"><a href="#设置预览摘要" class="headerlink" title="设置预览摘要"></a>设置预览摘要</h3><p>设置完模式后，读者们会发现，尽管首页显示的是所有文章的列表，但是每一篇文章都显示了所有内容，这样感觉看起来不舒服，这时候可以启用预览摘要模式，在<strong>主题配置文件</strong> 中找到<code>auto_excerpt</code>属性，将<code>enable</code>设置为<code>true</code> ，将<code>length</code>设置为想要预览到的字数，如下图所示：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">auto_excerpt:</span><br><span class="line">enable: true #将原有的false改为true</span><br><span class="line">length: 300  #设置预览的字数</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里说明一下：上述的部署指令中<code>hexo deploy</code>可以换成<code>hexo server</code>，两者的区别在于，前者是将博客部署到<strong>远程</strong>的Github上，而后者是运行在<strong>本地</strong>，通过<code>http://localhost:4000</code>在浏览器中访问。后者是为了调试配置方便而使用，但是最终本地博客还是需要<code>hexo deploy</code>指令将其部署至Github上。</p>
</blockquote>
<h3 id="添加评论功能"><a href="#添加评论功能" class="headerlink" title="添加评论功能"></a>添加评论功能</h3><h4 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h4><p>目前的评论系统，友言，网易云跟帖都挂了。所以，我最终采用的是来必力。</p>
<p>我新写一篇文章详细介绍了来必力评论系统的实现方法：<a href="http://wangwlj.com/2017/12/18/blog_comment/" target="_blank" rel="noopener">hexo博客优化之实现来必力评论功能</a></p>
<h4 id="以下是原文"><a href="#以下是原文" class="headerlink" title="以下是原文"></a>以下是原文</h4><p>NexT目前出到5.1.0版本，功能模块已经相当的丰富。NexT主题集成了评论系统，只需要设置相关的属性即可实现功能，其目前支持<strong>多说、Disqus、Facebook评论、Hyper评论、网页云跟帖</strong>等，其中“多说”是NexT推荐的评论系统，但是多说评论系统不稳定，经常会出现服务异常的问题。</p>
<p><del>笔者采用的是一款名为友言的评论系统，它也是NexT已经集成好的，可以直接拿来用的。下面对其操作进行讲解：</del></p>
<p><del>- <strong>注册友言账号</strong></del></p>
<p><del>打开<a href="http://www.uyan.cc/" target="_blank" rel="noopener">友言官网</a>，单击“注册”按钮后，按照套路可完成账号注册。</del></p>
<p><del>- <strong>获取uid</strong></del></p>
<p><del>注册完登录后，在首页单击“后台管理”按钮进入后台界面便可看到自己的用户ID，将其复制下来。</del></p>
<p><del>- <strong>设置uid</strong></del></p>
<p><del>打开<strong>主题配置文件</strong> ，在其中找到属性<code>youyan_uid</code>，然后在: 后添加之前复制的uid。</del></p>
<p><del>&gt; 提醒一下，<strong>:</strong> 冒号后面一定要有一个空格</del></p>
<p><del>然后部署一下Hexo，可以在本地或远程看到实现的评论功能，如下图所示：</del></p>
<p><a href="http://ww1.sinaimg.cn/large/c38a0784ly1fn8cr4ov1fj20ik0dnaad.jpg" target="_blank" rel="noopener"></a></p>
<p><del>&gt; 在笔者配置评论功能的时候，笔者遇到了一个问题：<em>本地博客有评论功能，而远程博客却没有</em> 。折腾了一下午，始终不知道其原因所在。后来，当笔者对博客绑定自己的域名后，发现远程的博客自动出现了评论功能。在此推测为域名的缘故。若没有绑定域名的读者们遇到这个情况，可以放放，先配置其他功能。</del></p>
<h3 id="设置侧边栏显示效果"><a href="#设置侧边栏显示效果" class="headerlink" title="设置侧边栏显示效果"></a>设置侧边栏显示效果</h3><p>在<strong>主题配置文件</strong> 中，找到<code>sidebar</code>的<code>display</code>属性，<code>display</code>属性有四种显示模式：分别为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">post    &#x2F;&#x2F; 默认显示方式</span><br><span class="line">always  &#x2F;&#x2F; 一直显示</span><br><span class="line">hide    &#x2F;&#x2F; 初始隐藏</span><br><span class="line">remove  &#x2F;&#x2F; 移除侧边栏</span><br></pre></td></tr></table></figure>

<p>笔者将其设置为hide模式，读者们可根据个人喜好进行设置。</p>
<h3 id="添加菜单选项"><a href="#添加菜单选项" class="headerlink" title="添加菜单选项"></a>添加菜单选项</h3><p>默认情况下，菜单导航栏有首页、归档、关于三个选项，除此之外笔者还添加了分类、标签和关于。在<strong>主题配置文件</strong> 中，找到<code>menu</code>属性，并去掉<code>categories、 tags、about</code>的的注释，如下图所示：</p>
<p>然后在Hexo根目录执行指令如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 添加分类页面</span><br><span class="line">hexo new page &quot;categories&quot;</span><br><span class="line">&#x2F;&#x2F; 添加标签页面</span><br><span class="line">hexo new page &quot;tags&quot;</span><br><span class="line">&#x2F;&#x2F; 添加关于页面</span><br><span class="line">hexo new page &quot;about&quot;</span><br></pre></td></tr></table></figure>

<p>执行完上述指令后，在Hexo根目录<code>/source/</code>文件夹下创建三个文件夹，命名分别为：<code>categories、tags、about</code>文件夹，在这些文件夹中分别会创建一个以<code>index</code>命名的Markdown文件，对这三个Markdown文件内容进行修改，使之分别为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: 2017-03-12 22:06:24</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line">date: 2017-03-12 17:27:16</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: about</span><br><span class="line">date: 2017-03-12 22:07:26</span><br><span class="line">type: &quot;about&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>完成文件的修改，然后部署Hexo即可完成菜单选项的添加。</p>
<h3 id="添加阅读次数统计"><a href="#添加阅读次数统计" class="headerlink" title="添加阅读次数统计"></a>添加阅读次数统计</h3><p>注册<a href="https://www.leancloud.cn/" target="_blank" rel="noopener">LeanCloud</a>账号，完成激活；点击左上角的”应用”-“创建新应用”-点击“数据”右边的齿轮–点击创建类class，类名字叫做<code>Counter</code>。</p>
<p>然后，修改<strong>主题配置文件</strong> ，找到<code>leancloud_visitors</code>，添加修改：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">leancloud_visitors:</span><br><span class="line">  enable: true #将原来的false改为true</span><br><span class="line">  app_id: #&lt;app_id&gt;</span><br><span class="line">  app_key: #&lt;app_key&gt;</span><br></pre></td></tr></table></figure>

<p>从设置中找到相应的id和key：</p>
<p><img src="https://gitee.com//Lucifiash/blogimg/raw/master/img/image-20200527124144968.png" alt="image-20200527124144968"></p>
<p>然后预览，如图：</p>
<p>插入（<a href="https://www.jianshu.com/p/702a7aec4d00" target="_blank" rel="noopener">Hexo添加不蒜子和LeanCloud统计无标题文章</a>）</p>
<p>找到站点的<code>themes/next/layout/_partials</code>目录下的<code>footer.swig</code>文件。插入代码如下。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.copyright %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"powered-by"</span>&gt;</span></span><br><span class="line">  &#123;&#123; __('footer.powered', '<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"theme-link"</span> <span class="attr">href</span>=<span class="string">"https://hexo.io"</span>&gt;</span>Hexo<span class="tag">&lt;/<span class="name">a</span>&gt;</span>') &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"theme-info"</span>&gt;</span></span><br><span class="line">  &#123;&#123; __('footer.theme') &#125;&#125; -</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"theme-link"</span> <span class="attr">href</span>=<span class="string">"https://github.com/iissnan/hexo-theme-next"</span>&gt;</span></span><br><span class="line">    NexT.&#123;&#123; theme.scheme &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"># 此位置插入以下代码</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">本站总访问量 <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_pv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span> 次&amp;nbsp&amp;nbsp&amp;nbsp</span><br><span class="line">本站访客数<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_uv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>人次</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>





<p>复制后，更改<code>主题配置文件</code> 的  <code>leancloud_visitors:</code> 。注意将<code>enable</code>设为<code>true</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show number of visitors to each article.</span></span><br><span class="line"><span class="comment"># You can visit https://leancloud.cn get AppID and AppKey.</span></span><br><span class="line">leancloud_visitors:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  app_id: <span class="comment">#your App ID</span></span><br><span class="line">  app_key: <span class="comment">#your App Key</span></span><br></pre></td></tr></table></figure>



<h3 id="设置安全域名"><a href="#设置安全域名" class="headerlink" title="设置安全域名"></a>设置安全域名</h3><p><img src="https://gitee.com//Lucifiash/blogimg/raw/master/img/image-20200527124848795.png" alt="image-20200527124848795"></p>
<h2 id="添加社交链接"><a href="#添加社交链接" class="headerlink" title="添加社交链接"></a>添加社交链接</h2><p>笔者希望在个人博客中加入自己的微博、知乎和Github链接以提高访问量，接下来了解一下社交链接如何添加：</p>
<ul>
<li><strong>添加链接及图标</strong></li>
</ul>
<p>在<strong>主题配置文件</strong> 中找到<code>social</code>属性，在其下方添加社交链接及图标，其格式为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">社交平台名称：链接 || 图标</span><br></pre></td></tr></table></figure>

<p>链接的图标全部来自于<a href="http://fontawesome.io/icons/" target="_blank" rel="noopener">Font Awesome</a></p>
<ul>
<li><strong>个人配置</strong></li>
</ul>
<p>笔者社交链接添加情况如以下代码所示：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">social:</span><br><span class="line">  GitHub: https:&#x2F;&#x2F;github.com&#x2F;Lucifiash || github</span><br><span class="line">  E-Mail: mailto:lucifiash@qq.com || envelope</span><br><span class="line">  #Google: https:&#x2F;&#x2F;plus.google.com&#x2F;yourname || google</span><br><span class="line">  Bilibili: https:&#x2F;&#x2F;space.bilibili.com&#x2F;510597812&#x2F;dynamic || twitter</span><br><span class="line">  知乎: https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;guo-qu-zhu-wu-xin || vk</span><br><span class="line">  #Twitter: https:&#x2F;&#x2F;twitter.com&#x2F;yourname || twitter</span><br><span class="line">  #FB Page: https:&#x2F;&#x2F;www.facebook.com&#x2F;yourname || facebook</span><br><span class="line">  #VK Group: https:&#x2F;&#x2F;vk.com&#x2F;yourname || vk</span><br><span class="line">  #StackOverflow: https:&#x2F;&#x2F;stackoverflow.com&#x2F;yourname || stack-overflow</span><br><span class="line">  #YouTube: https:&#x2F;&#x2F;youtube.com&#x2F;yourname || youtube</span><br><span class="line">  #Instagram: https:&#x2F;&#x2F;instagram.com&#x2F;yourname || instagram</span><br><span class="line">  #Skype: skype:yourname?call|chat || skype</span><br></pre></td></tr></table></figure>

<p>其中，微博有其对应的图标，而知乎在图标库中却没有找到，笔者找了一款<code>gratipay</code>的图标来代替知乎图标。</p>
<blockquote>
<p>如果没有找到指定的图标，将会启用默认的图标。</p>
</blockquote>
<ul>
<li><strong>效果展示</strong></li>
</ul>
<p>配置完成后，具体效果显示如下：</p>
<p><img src="https://gitee.com//Lucifiash/blogimg/raw/master/img/image-20200527140144599.png" alt="image-20200527140144599"></p>
<h2 id="添加友情链接功能"><a href="#添加友情链接功能" class="headerlink" title="添加友情链接功能"></a>添加友情链接功能</h2><p>在<strong>主题配置文件</strong> 中找到<code>links</code>属性，修改<code>links_title</code>属性的值为“友情链接”（也可以是其他文案），取消注释<code>links:</code>，然后添加上好友的博客名称和博客地址，其格式如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Blog rolls</span><br><span class="line">links_icon: link</span><br><span class="line">links_title: 友情链接</span><br><span class="line">links_layout: block</span><br><span class="line">#links_layout: inline</span><br><span class="line">links:</span><br><span class="line">    lucifiash: https:&#x2F;&#x2F;lucifiash.top&#x2F;</span><br></pre></td></tr></table></figure>

<p>笔者友情链接出现位置在社交链接的下方，效果如下图所示：</p>
<p><img src="https://gitee.com//Lucifiash/blogimg/raw/master/img/image-20200527140822442.png" alt="image-20200527140822442"></p>
<h2 id="设置博文内链接为蓝色"><a href="#设置博文内链接为蓝色" class="headerlink" title="设置博文内链接为蓝色"></a>设置博文内链接为蓝色</h2><ul>
<li><strong>修改原因</strong></li>
</ul>
<p>链接的默认颜色是白色的，和普通字体颜色相同，不容易区分</p>
<ul>
<li><strong>修改方法</strong></li>
</ul>
<p>通过路径：</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">F:Hexo\themes\next\source\css\_common\components\post\</span><br></pre></td></tr></table></figure>
</blockquote>
<p>打开<code>post.styl</code>文件，在文件中添加，如下字段：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.post-body p a&#123;</span><br><span class="line">  color: #0593d3;</span><br><span class="line">  border-bottom: none;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    color: #0477ab;</span><br><span class="line">    text-decoration: underline;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最好将新添加的内容放在原文件内容的底部，便于查看。</p>
<h2 id="文章末尾添加版权说明"><a href="#文章末尾添加版权说明" class="headerlink" title="文章末尾添加版权说明"></a>文章末尾添加版权说明</h2><p>直接修改<strong>主题配置文件</strong> ，定位到<code>post_copyright</code>，将<code>enable</code>由<code>false</code>改为<code>true</code>即可。</p>
<p>该字段如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Declare license on posts</span><br><span class="line">post_copyright:</span><br><span class="line">  enable: true</span><br><span class="line">  license: CC BY-NC-SA 3.0</span><br><span class="line">  license_url: https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-nc-sa&#x2F;3.0&#x2F;</span><br></pre></td></tr></table></figure>

<h2 id="显示站点文章总字数"><a href="#显示站点文章总字数" class="headerlink" title="显示站点文章总字数"></a>显示站点文章总字数</h2><p><strong>实现方法</strong></p>
<p>首先安装插件，插件安装同上（已经“显示每篇文章字数”则忽略这步）。</p>
<p>然后修改<strong>主题配置文件</strong> ，定位到<code>post_wordcount</code>，将<code>totalcount</code>由<code>false</code>改为<code>true</code>即可。</p>
<h2 id="显示每篇文章字数"><a href="#显示每篇文章字数" class="headerlink" title="显示每篇文章字数"></a>显示每篇文章字数</h2><p><strong>实现方法</strong></p>
<p>首先安装插件，执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure>

<p>然后修改<strong>主题配置文件</strong> ，定位到<code>post_wordcount</code>，将<code>wordcount</code>由<code>false</code>改为<code>true</code>即可。</p>
<h2 id="设置个人头像"><a href="#设置个人头像" class="headerlink" title="设置个人头像"></a>设置个人头像</h2><p>通过上面切换到Pisces发现，自己的头像还是属于匿名状态，因此，我们有必要设置一下自己的头像。</p>
<p><strong>实现方法</strong></p>
<p>在<strong>主题配置文件</strong> 中找到<code>avatar</code>字段,进行修改:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Sidebar Avatar</span><br><span class="line"># in theme directory(source&#x2F;images): &#x2F;images&#x2F;avatar.gif</span><br><span class="line"># in site  directory(source&#x2F;uploads): &#x2F;uploads&#x2F;avatar.gif</span><br><span class="line">avatar: &#x2F;images&#x2F;head_icon.jpg</span><br></pre></td></tr></table></figure>

<p>先将<code>avatar</code>字段前的#删除，然后粘贴上头像的目录位置或者链接。</p>
<p>笔者将头像图片保存在了主题目录下的<code>source/images</code>文件夹，也可以存放在站点目录下的<code>source/uploads</code>文件夹。也可以将自己的头像图片，保存在百度网盘或者新浪微盘的某个地方，然后将对应的<code>url</code>地址复制过来，添加在<code>avatar</code>字段后即可。</p>
<h2 id="设置头像动态特效"><a href="#设置头像动态特效" class="headerlink" title="设置头像动态特效"></a>设置头像动态特效</h2><p>在路径<code>F:\Hexo\themes\next\layout\_partials</code>找到<code>head.swig</code>文件并打开，在其末尾添加，如下字段：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;link href&#x3D;&quot;&#x2F;&#x2F;cdn.bootcss.com&#x2F;animate.css&#x2F;3.5.0&#x2F;animate.min.css&quot; rel&#x3D;&quot;stylesheet&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>并在路径<code>themes\next\source\css\_common\components\sidebar\</code>下找到<code>sidebar-author.styl</code>文件并打开，添加如下语句：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.site-author-image:hover &#123;</span><br><span class="line">  -webkit-animation: jello 1s;</span><br><span class="line">  animation: jello 1s;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>其中<code>jello</code>是我选择的动态效果，你可以在<a href="https://daneden.github.io/animate.css/" target="_blank" rel="noopener">这里</a>找到你喜欢的特效;然后更换上述代码中的<code>jello</code>字段，达到预期效果后，即可部署至远程。</p>
<h2 id="fork-me-on-github"><a href="#fork-me-on-github" class="headerlink" title="fork me on github"></a>fork me on github</h2><p><a href="https://www.himmy.cn/2019/07/06/hexo%E5%8D%9A%E5%AE%A2next%E4%B8%BB%E9%A2%98%E5%8F%B3%E4%B8%8A%E8%A7%92%E6%B7%BB%E5%8A%A0fork-me-on-github%E5%85%A5%E5%8F%A3/" target="_blank" rel="noopener">Hexo博客NexT主题右上角添加fork me on github入口</a></p>
<p><a href="https://jeffyang.top/Hexo/Hexo%E4%B8%BB%E9%A2%98Next%E7%BE%8E%E5%8C%96/" target="_blank" rel="noopener">麻瓜码农</a></p>
<p>自己挑选样式<a href="http://tholman.com/github-corners/" target="_blank" rel="noopener">http://tholman.com/github-corners/</a></p>
]]></content>
      <categories>
        <category>折腾博客这些事</category>
      </categories>
      <tags>
        <tag>blog 优化</tag>
      </tags>
  </entry>
  <entry>
    <title>Openstack云平台的搭建与运维》期末考试A卷</title>
    <url>/2020/05/29/%E3%80%8AOpenstack%E4%BA%91%E5%B9%B3%E5%8F%B0%E7%9A%84%E6%90%AD%E5%BB%BA%E4%B8%8E%E8%BF%90%E7%BB%B4%E3%80%8B%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95A%E5%8D%B7/</url>
    <content><![CDATA[<h1 id="《Openstack云平台的搭建与运维》期末考试A卷"><a href="#《Openstack云平台的搭建与运维》期末考试A卷" class="headerlink" title="《Openstack云平台的搭建与运维》期末考试A卷"></a>《Openstack云平台的搭建与运维》期末考试A卷</h1><h2 id="任务一、云平台搭建（40分）"><a href="#任务一、云平台搭建（40分）" class="headerlink" title="任务一、云平台搭建（40分）"></a>任务一、云平台搭建（40分）</h2><p>根据云平台设计以及以下题干中提供的信息，修改云平台IaaS各节点的系统配置，按云平台搭建步骤逐步安装，并完成相应的答题。</p>
<h3 id="1-操作系统环境配置（4分）"><a href="#1-操作系统环境配置（4分）" class="headerlink" title="1.操作系统环境配置（4分）"></a>1.操作系统环境配置（4分）</h3><p>设置主机名，防火墙设置以及SELinux设置如下：</p>
<p>（1）设置控制节点主机名controller；计算节点主机名：compute。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# hostnamectl set-hostname controller</span><br><span class="line">[root@localhost ~]# hostnamectl set-hostname compute</span><br></pre></td></tr></table></figure>

<p>（2）各个节点关闭防火墙，设置开机不启动。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# systemctl stop firewalld.service</span><br><span class="line">[root@controller ~]# systemctl disable firewalld.service</span><br><span class="line">Removed symlink &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;dbus-org.fedoraproject.FirewallD1.service.</span><br><span class="line">Removed symlink &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;basic.target.wants&#x2F;firewalld.service.</span><br><span class="line"></span><br><span class="line">[root@compute ~]# systemctl stop firewalld.service</span><br><span class="line">[root@compute ~]# systemctl disable firewalld.service</span><br><span class="line">Removed symlink &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;dbus-org.fedoraproject.FirewallD1.service.</span><br><span class="line">Removed symlink &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;basic.target.wants&#x2F;firewalld.service.</span><br></pre></td></tr></table></figure>

<p>（3）设置各个节点selinux为permissive。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# setenforce 0</span><br><span class="line">[root@controller ~]# getenforce </span><br><span class="line">Permissive</span><br><span class="line">[root@compute ~]# setenforce 0</span><br><span class="line">[root@compute ~]# getenforce </span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure>

<p>（4）退出CRT，重新通过ssh连接各节点服务器。</p>
<p>使用命令进行查询控制节点的主机名，防火墙状态以及selinux的状态。以文本形式依次将命令行及查询信息提交到答题框。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# hostnamectl </span><br><span class="line">   Static hostname: controller</span><br><span class="line">         Icon name: computer-server</span><br><span class="line">           Chassis: server</span><br><span class="line">        Machine ID: cef62bca9d724bfa9db3b81ed7bae443</span><br><span class="line">           Boot ID: 8414597f288d4b14b573e612be43f703</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:&#x2F;o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-327.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br><span class="line">[root@compute ~]# hostnamectl </span><br><span class="line">   Static hostname: compute</span><br><span class="line">         Icon name: computer-server</span><br><span class="line">           Chassis: server</span><br><span class="line">        Machine ID: d0521d51bd8f4885919c3d2be3552219</span><br><span class="line">           Boot ID: dfded6b0297a4a938591c019309d0cbb</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:&#x2F;o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-327.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br><span class="line"></span><br><span class="line">[root@controller ~]# sestatus </span><br><span class="line">SELinux status:                 enabled</span><br><span class="line">SELinuxfs mount:                &#x2F;sys&#x2F;fs&#x2F;selinux</span><br><span class="line">SELinux root directory:         &#x2F;etc&#x2F;selinux</span><br><span class="line">Loaded policy name:             targeted</span><br><span class="line">Current mode:                   permissive</span><br><span class="line">Mode from config file:          permissive</span><br><span class="line">Policy MLS status:              enabled</span><br><span class="line">Policy deny_unknown status:     allowed</span><br><span class="line">Max kernel policy version:      28</span><br><span class="line">[root@compute ~]# sestatus </span><br><span class="line">SELinux status:                 enabled</span><br><span class="line">SELinuxfs mount:                &#x2F;sys&#x2F;fs&#x2F;selinux</span><br><span class="line">SELinux root directory:         &#x2F;etc&#x2F;selinux</span><br><span class="line">Loaded policy name:             targeted</span><br><span class="line">Current mode:                   permissive</span><br><span class="line">Mode from config file:          permissive</span><br><span class="line">Policy MLS status:              enabled</span><br><span class="line">Policy deny_unknown status:     allowed</span><br><span class="line">Max kernel policy version:      28</span><br></pre></td></tr></table></figure>



<h3 id="2-上传镜像源并挂载（4分）"><a href="#2-上传镜像源并挂载（4分）" class="headerlink" title="2.上传镜像源并挂载（4分）"></a>2.上传镜像源并挂载（4分）</h3><p>在控制节点上通过SecureFX上传两个镜像文件CentOS-7-x86_64-DVD-1511.iso, XianDian-IaaS-v2.2.iso到opt下，通过命令行创建两个目录/opt/centos,/opt/iaas,并将以上镜像文件分别挂载到上述两个目录下，在答题框依次提交上述的命令以及执行结果；</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]#  mkdir &#x2F;opt&#x2F;&#123;centos,iaas&#125;</span><br><span class="line">[root@controller ~]# mount -o loop CentOS-7-x86_64-DVD-1511.iso &#x2F;opt&#x2F;centos&#x2F;</span><br><span class="line">mount: &#x2F;dev&#x2F;loop3 is write-protected, mounting read-only</span><br><span class="line">[root@controller ~]# mount -o loop XianDian-IaaS-v2.1.iso &#x2F;opt&#x2F;iaas&#x2F;</span><br><span class="line">mount: &#x2F;dev&#x2F;loop0 is write-protected, mounting read-only</span><br></pre></td></tr></table></figure>



<h3 id="3-配置本地以及远程yum源（4分）"><a href="#3-配置本地以及远程yum源（4分）" class="headerlink" title="3.配置本地以及远程yum源（4分）"></a>3.配置本地以及远程yum源（4分）</h3><p>配置控制节点本地yum源文件local.repo ，搭建ftp服务器指向存放yum源路径；配置计算节点yum源文件ftp.repo使用之前配置的控制节点ftp作为yum源，其中的两个节点的地址使用主机名表示。使用cat命令查看控制节点和计算节点的yum源全路径配置文件。以文本形式提交查询命令及结果到答题框。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# cat &#x2F;etc&#x2F;yum.repos.d&#x2F;local.repo </span><br><span class="line">[iaas]</span><br><span class="line">name&#x3D;iaas</span><br><span class="line">gpgcheck&#x3D;0</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">baseurl&#x3D;file:&#x2F;&#x2F;&#x2F;opt&#x2F;iaas&#x2F;iaas-repo</span><br><span class="line">[centos]</span><br><span class="line">name&#x3D;centos</span><br><span class="line">gpgcheck&#x3D;0</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">baseurl&#x3D;file:&#x2F;&#x2F;&#x2F;opt&#x2F;centos</span><br></pre></td></tr></table></figure>



<h3 id="4-环境变量配置（4分）"><a href="#4-环境变量配置（4分）" class="headerlink" title="4.环境变量配置（4分）"></a>4.环境变量配置（4分）</h3><p>在控制节点和计算节点分别安装iaas-xiandian软件包，除了完成配置文件中基本变量的配置，根据表2完成指定变量的配置，以文本形式提交配置文件到答题框中。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# cat &#x2F;etc&#x2F;yum.repos.d&#x2F;local.repo </span><br><span class="line">[iaas]</span><br><span class="line">name&#x3D;iaas</span><br><span class="line">gpgcheck&#x3D;0</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">baseurl&#x3D;file:&#x2F;&#x2F;&#x2F;opt&#x2F;iaas&#x2F;iaas-repo</span><br><span class="line">[centos]</span><br><span class="line">name&#x3D;centos</span><br><span class="line">gpgcheck&#x3D;0</span><br><span class="line">enabled&#x3D;1</span><br><span class="line">baseurl&#x3D;file:&#x2F;&#x2F;&#x2F;opt&#x2F;centos</span><br><span class="line">[root@controller ~]# cat &#x2F;etc&#x2F;xiandian&#x2F;openrc.sh </span><br><span class="line">##--------------------system Config--------------------##</span><br><span class="line">##Controller Server Manager IP. example:x.x.x.x</span><br><span class="line">HOST_IP&#x3D;192.168.100.10</span><br><span class="line"></span><br><span class="line">##Controller Server hostname. example:controller</span><br><span class="line">HOST_NAME&#x3D;controller</span><br><span class="line"></span><br><span class="line">##Compute Node Manager IP. example:x.x.x.x</span><br><span class="line">HOST_IP_NODE&#x3D;192.168.100.20</span><br><span class="line"></span><br><span class="line">##Compute Node hostname. example:compute</span><br><span class="line">HOST_NAME_NODE&#x3D;compute</span><br><span class="line"></span><br><span class="line">##--------------------Rabbit Config ------------------##</span><br><span class="line">##user for rabbit. example:openstack</span><br><span class="line">RABBIT_USER&#x3D;openstack</span><br><span class="line"></span><br><span class="line">##Password for rabbit user .example:000000</span><br><span class="line">RABBIT_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##--------------------MySQL Config---------------------##</span><br><span class="line">##Password for MySQL root user . exmaple:000000</span><br><span class="line">DB_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##--------------------Keystone Config------------------##</span><br><span class="line">##Password for Keystore admin user. exmaple:000000</span><br><span class="line">DOMAIN_NAME&#x3D;demo</span><br><span class="line">ADMIN_PASS&#x3D;000000</span><br><span class="line">DEMO_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Password for Mysql keystore user. exmaple:000000</span><br><span class="line">KEYSTONE_DBPASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##--------------------Glance Config--------------------##</span><br><span class="line">##Password for Mysql glance user. exmaple:000000</span><br><span class="line">GLANCE_DBPASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Password for Keystore glance user. exmaple:000000</span><br><span class="line">GLANCE_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##--------------------Nova Config----------------------##</span><br><span class="line">##Password for Mysql nova user. exmaple:000000</span><br><span class="line">NOVA_DBPASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Password for Keystore nova user. exmaple:000000</span><br><span class="line">NOVA_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##--------------------Neturon Config-------------------##</span><br><span class="line">##Password for Mysql neutron user. exmaple:000000</span><br><span class="line">NEUTRON_DBPASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Password for Keystore neutron user. exmaple:000000</span><br><span class="line">NEUTRON_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##metadata secret for neutron. exmaple:000000</span><br><span class="line">METADATA_SECRET&#x3D;000000</span><br><span class="line"></span><br><span class="line">##External Network Interface. example:eth1</span><br><span class="line">INTERFACE_NAME&#x3D;enp9s0</span><br><span class="line"></span><br><span class="line">##First Vlan ID in VLAN RANGE for VLAN Network. exmaple:101</span><br><span class="line">#minvlan&#x3D;</span><br><span class="line"></span><br><span class="line">##Last Vlan ID in VLAN RANGE for VLAN Network. example:200</span><br><span class="line">#maxvlan&#x3D;</span><br><span class="line"></span><br><span class="line">##--------------------Cinder Config--------------------##</span><br><span class="line">##Password for Mysql cinder user. exmaple:000000</span><br><span class="line">CINDER_DBPASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Password for Keystore cinder user. exmaple:000000</span><br><span class="line">CINDER_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Cinder Block Disk. example:md126p3</span><br><span class="line">BLOCK_DISK&#x3D;sda1</span><br><span class="line"></span><br><span class="line">##--------------------Trove Config--------------------##</span><br><span class="line">##Password for Mysql Trove User. exmaple:000000</span><br><span class="line">TROVE_DBPASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Password for Keystore Trove User. exmaple:000000</span><br><span class="line">TROVE_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##--------------------Swift Config---------------------##</span><br><span class="line">##Password for Keystore swift user. exmaple:000000</span><br><span class="line">SWIFT_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##The NODE Object Disk for Swift. example:md126p4.</span><br><span class="line">OBJECT_DISK&#x3D;sda2</span><br><span class="line"></span><br><span class="line">##The NODE IP for Swift Storage Network. example:x.x.x.x.</span><br><span class="line">STORAGE_LOCAL_NET_IP&#x3D;192.168.100.20</span><br><span class="line"></span><br><span class="line">##--------------------Heat Config----------------------##</span><br><span class="line">##Password for Mysql heat user. exmaple:000000</span><br><span class="line">HEAT_DBPASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Password for Keystore heat user. exmaple:000000</span><br><span class="line">HEAT_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##--------------------Ceilometer Config----------------##</span><br><span class="line">##Password for Mysql ceilometer user. exmaple:000000</span><br><span class="line">CEILOMETER_DBPASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Password for Keystore ceilometer user. exmaple:000000</span><br><span class="line">CEILOMETER_PASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##--------------------AODH Config----------------##</span><br><span class="line">##Password for Mysql AODH user. exmaple:000000</span><br><span class="line">AODH_DBPASS&#x3D;000000</span><br><span class="line"></span><br><span class="line">##Password for Keystore AODH user. exmaple:000000</span><br><span class="line">AODH_PASS&#x3D;000000</span><br></pre></td></tr></table></figure>

<h3 id="5-数据库安装（4分）"><a href="#5-数据库安装（4分）" class="headerlink" title="5. 数据库安装（4分）"></a>5. 数据库安装（4分）</h3><p>根据平台安装步骤安装至数据库服务，使用提供的脚本iaas-install-mysql.sh安装mysql数据库服务。使用root用户登录数据库，使用命令查看mysql数据库中user表的host，user，password信息。将命令及反馈信息以文本形式提交到答题框。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-mysql.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# mysql -uroot -p000000</span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br></pre></td></tr></table></figure>



<h3 id="6-keystone安装（4分）"><a href="#6-keystone安装（4分）" class="headerlink" title="6.keystone安装（4分）"></a>6.keystone安装（4分）</h3><p>根据平台安装步骤安装至keystone认证服务，在控制节点使用提供的脚本iaas-install-keystone.sh安装keystone组件，admin-openrc.sh 文件在/etc/keystone/下。使用openstack 相关命令，查询admin用户信息，将操作命令和输出结果以文本形式提交到答题框。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-keystone.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# mysql -uroot -p000000</span><br><span class="line">MariaDB [(none)]&gt; show grants for keystone;</span><br><span class="line">[root@controller ~]# openstack project show admin</span><br></pre></td></tr></table></figure>



<h3 id="7-glance安装（4分）"><a href="#7-glance安装（4分）" class="headerlink" title="7.glance安装（4分）"></a>7.glance安装（4分）</h3><p>根据平台安装步骤安装至镜像服务，在控制节点使用提供的脚本iaas-install-glance.sh安装glance组件。使用镜像文件CentOS_7.2_x86_64_XD.qcow2创建glance镜像CentOS7.2，格式为qcow2。使用Glance相关命令查询镜像详细信息，以文本形式提交命令和结果到答题框。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# glance image-create --name &quot;centos_7-x86_64&quot; --disk-format qcow2 --container-format bare --progress &lt; &#x2F;opt&#x2F;iaas&#x2F;images&#x2F;CentOS_7.2_x86_64_XD.qcow2</span><br><span class="line">[root@controller ~]# systemctl status openstack-glance-api.service openstack-glance-registry.service</span><br></pre></td></tr></table></figure>



<h3 id="8-nova安装（4分）"><a href="#8-nova安装（4分）" class="headerlink" title="8.nova安装（4分）"></a>8.nova安装（4分）</h3><p>根据平台安装步骤安装至nova计算服务，在控制节点使用提供的脚本iaas-install-nova-controller.sh、在计算节点使用提供的脚本iaas-install-nova-compute.sh，安装nova组件。使用nova相关命令查询计算节点虚拟机监控器的状态，将命令和结果以文本形式提交到答题框。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# iaas-install-nova-controller.sh</span><br><span class="line">[root@compute ~]# iaas-install-nova-compute.sh</span><br><span class="line">[root@controller ~]# openstack  hypervisor show compute</span><br><span class="line">[root@controller ~]# nova  hypervisor-stats</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]#nova hypervisor-list</span><br><span class="line">+----+---------------------+-------+---------+</span><br><span class="line">| ID | Hypervisor hostname | State | Status  |</span><br><span class="line">+----+---------------------+-------+---------+</span><br><span class="line">| 1  | compute             | up    | enabled |</span><br><span class="line">| 2  | controller          | up    | enabled |</span><br><span class="line">+----+---------------------+-------+---------+</span><br></pre></td></tr></table></figure>



<h3 id="9-网络创建（4分）"><a href="#9-网络创建（4分）" class="headerlink" title="9.网络创建（4分）"></a>9.网络创建（4分）</h3><p>创建云主机外部网络ext-net，子网为ext-subnet，虚拟机浮动IP可用网段为192.168.200.100<del>192.168.200.200，网关为192.168.200.1。创建云主机隧道网络int-net1，子网为int-subnet1，虚拟机子网IP可用网段为10.0.0.100</del>10.0.0.200，网关为10.0.0.1；创建云主机隧道网络int-net2，子网为int-subnet2，虚拟机子网IP可用网段为10.0.1.100~10.0.1.200，网关为10.0.1.1。添加名为ext-router的路由器，添加网关在ext-net网络，添加内部端口到int-net1网络，完成隧道网络和外部网络的连通。</p>
<p>使用neutron相关命令查询所创建路由的详细信息，将查询命令和结果以文本形式提交到答题框。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# neutron router-list</span><br><span class="line">[root@controller ~]# neutron router-show ext-router</span><br></pre></td></tr></table></figure>



<h3 id="10-dashboard配置（4分）"><a href="#10-dashboard配置（4分）" class="headerlink" title="10.dashboard配置（4分）"></a>10.dashboard配置（4分）</h3><p>通过脚本iaas-install-dashboard.sh安装dashboard，</p>
<p>使用curl命令查询网址<a href="http://192.168.100.10/dashboard并将查询结果以文本形式提交到答题框。" target="_blank" rel="noopener">http://192.168.100.10/dashboard并将查询结果以文本形式提交到答题框。</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# curl -L http:&#x2F;&#x2F;192.168.100.10&#x2F;dashboard</span><br></pre></td></tr></table></figure>

<h2 id="任务二、云平台运维（60分）"><a href="#任务二、云平台运维（60分）" class="headerlink" title="任务二、云平台运维（60分）"></a>任务二、云平台运维（60分）</h2><p>按以下配置在云平台中创建云主机，完成本任务下的相关试题后关闭云主机。</p>
<p>云主机1： </p>
<p>（1）名称：IaaS</p>
<p>（2）镜像文件：Xiandian-IaaS-All.qcow2</p>
<p>（3）云主机类型：4cpu、8G内存、100G硬盘</p>
<p>（4）网络：网络1：int-net1，绑定浮动IP</p>
<p>​      网络2：int-net2</p>
<h3 id="1-rabbitmq管理（10分）"><a href="#1-rabbitmq管理（10分）" class="headerlink" title="1.rabbitmq管理（10分）"></a>1.rabbitmq管理（10分）</h3><p>登录IaaS云主机，使用rabbitmqctl创建用户xiandian-admin，密码为admin。然后查询所有用户列表，将以上所有操作命令及对应的反馈结果以文本形式提交到答题框中。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@xiandian ~]# rabbitmqctl add_user xiandianuser admin</span><br></pre></td></tr></table></figure>



<h3 id="2-数据库管理（10分）"><a href="#2-数据库管理（10分）" class="headerlink" title="2.数据库管理（10分）"></a>2.数据库管理（10分）</h3><p>登录IaaS云主机，通过mysql相关命令，查看当前是什么用户，以文本信息提交操作命令和查询结果到答题框。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@xiandian ~]# mysql -uroot -p000000</span><br><span class="line">select user();</span><br></pre></td></tr></table></figure>



<h3 id="3-nova管理（10分）"><a href="#3-nova管理（10分）" class="headerlink" title="3.nova管理（10分）"></a>3.nova管理（10分）</h3><p>登录IaaS云主机，修改云平台中默认每个tenant的实例注入文件大小配额为20480个，在答题框填入该命令，查询修改后的默认配额信息并以文本形式提交到答题框。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@xiandian ~]# nova quota-class-update  --injected-files 20480 default</span><br><span class="line">[root@xiandian ~]# nova quota-class-show default</span><br></pre></td></tr></table></figure>



<h3 id="4-块存储服务管理（10分）"><a href="#4-块存储服务管理（10分）" class="headerlink" title="4.块存储服务管理（10分）"></a>4.块存储服务管理（10分）</h3><p>登录IaaS云主机，创建名为“ lvm”的卷类型,然后创建一块带“lvm” 标识的云硬盘，名称为 BlockVloume，大小为 2G，查询该云硬盘详细信息，以文本形式在答题框按顺序输入操作命令及查询结果。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@xiandian ~]# cinder  type-create lvm --is-public true</span><br><span class="line">[root@xiandian ~]# cinder  create --display-name BlockVloume  --volume-type lvm 2</span><br><span class="line">[root@xiandian ~]# cinder show 6b232c83-ea04-4e8d-9d42-ed79f57d0a4d</span><br></pre></td></tr></table></figure>



<h3 id="5-glance镜像创建（10分）"><a href="#5-glance镜像创建（10分）" class="headerlink" title="5.glance镜像创建（10分）"></a>5.glance镜像创建（10分）</h3><p>登录IaaS云主机，使用glance相关命令上传CentOS_6.5_x86_64_XD.qcow2镜像到云主机中，镜像名为testone，然后使用openstack相关命令，并查看镜像的详细信息，将命令与返回结果提交到答题框。</p>
<h3 id="6-Neutron管理（10分）"><a href="#6-Neutron管理（10分）" class="headerlink" title="6.Neutron管理（10分）"></a>6.Neutron管理（10分）</h3><p>登录“controller”节点；通过命令使用 centos7 镜像创建一台名为 iaas-2 的虚 拟机并指定虚拟机内网地址为 10.0.0.120。依次将各操作命令与返回结果以文本</p>
<p>形式提交到答题框。</p>
]]></content>
      <categories>
        <category>运维相关</category>
      </categories>
      <tags>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>通过 admin 后台管理 hexo 博客</title>
    <url>/2020/05/29/%E9%80%9A%E8%BF%87-admin-%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86-hexo-%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<h1 id="通过-admin-后台管理-hexo-博客"><a href="#通过-admin-后台管理-hexo-博客" class="headerlink" title="通过 admin 后台管理 hexo 博客"></a>通过 admin 后台管理 hexo 博客</h1><p>用了两年的 hexo 写博客，但随着博客数量的增加，构建变得原来越耗时，写博客也是强依赖于文本编辑器，无法通过 web 实时修改，更加没办法通过手机端去修改博客的内容，这让我挺苦恼。</p>
<p>在纠结要不要更换成 WP/Ghost 良久之后，我决定，还是先把 Hexo 整个体验优化一下，等以后有大把空闲时间了，再折腾迁移的事情。</p>
<h3 id="博客后台管理"><a href="#博客后台管理" class="headerlink" title="博客后台管理"></a>博客后台管理</h3><p>为了能够方便管理博客，我自己写过一个简单的 Blog Writer，然后配合 MakeFile 来简化流程，事实上，还是太麻烦了。在网上搜罗了一番，找到了两个博客管理后台，一个叫做 <code>hexo-hey</code>，界面还是做的挺不错的，但是呢，功能比较简单，或者说过于简单；还有一个就是我当前使用的 <code>hexo-admin</code>，其实也没多多少功能，只不过在细节上的处理稍微完善一些，而且项目活跃度也高一点，但仍然不能满足我的需求——它不支持移动端。</p>
<p>所以我 fork 了这个项目，对它做了一些修改，目前是可以通过移动端编辑的。</p>
<p>Fork 过来后，给官方提过一个 PR，貌似还没有合并，合并的那些代码主要是兼容了移动端，但是后来我又发现了它的各种 bug 和性能问题，修复后，并没有提 PR，最新的代码在这里：<a href="https://github.com/barretlee/hexo-admin" target="_blank" rel="noopener">hexo-admin</a>。</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>如果你要使用我修改的代码可以这么做：</p>
<ol>
<li>按照官方的方式安装 <code>hexo-admin</code></li>
<li>下载我修改的代码到一个文件夹，执行 <code>npm link</code>;</li>
<li>在 hexo 根目录下执行 <code>npm link hexo-admin</code>;</li>
</ol>
<p>把代码链接过去，我懒得给官方提 PR 了，这玩意儿我做了一些私人定制，不适合继续提 PR 了，比如 Pages 我只允许展示 <code>/pages</code> 目录下的资源。</p>
<p>整个后台使用 react 构建的，代码逻辑还比较清晰，喜欢折腾的同学可以在原来的代码基础上继续修改。</p>
<p><em>P.S. 当前这篇文章就是通过 Web 编辑的，我的 hexo 博客已经部署到阿里云了。</em></p>
<p>转载：<a href="https://www.dazhuanlan.com/2019/12/11/5df0a05478abf/" target="_blank" rel="noopener">大专栏</a></p>
]]></content>
      <categories>
        <category>折腾博客这些事</category>
      </categories>
      <tags>
        <tag>blog 优化</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2020/05/26/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
</search>
